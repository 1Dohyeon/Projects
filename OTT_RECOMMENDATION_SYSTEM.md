# OTT 추천 시스템

> **콘텐츠 1~8개와 해당 콘텐츠들을 방영하는 OTT들을 추천하는 시스템**
> - 링크: [2025-MJU-Social/RecommendModel_withFastAPI](https://github.com/2025-MJU-Social/RecommendModel_withFastAPI/tree/test)

## 1. 프로젝트 개요

- **참가 인원**: 3인 프로젝트
- **기간**: 2025/05 ~ 2025/06 (약 6주)
- **기술 스택**: React, FastAPI, Pytorch
- **담당 파트**: 시스템 개발, 풀스택

오늘날 국내 OTT 시장은 수평, 수직적으로 확대되고 있으며, 소비자 입장에서는 이를 모두 구독하기 어렵다는 단점이 있다. 따라서 사용자 취향에 맞는 콘텐츠를 추천하면서, 최대한 많은 추천 콘텐츠들을 사용자의 OTT 사용 시간 내에 볼 수 있도록 효율적으로 OTT 구독 관리를 할 수 있는 시스템을 설계하였다.

## 2. 프로젝트 설계

### 2.1 사용된 기술

시스템에 적용된 핵심 기술과 이론으로 첫 번째는 자연어 처리 기술이다. Sentence Transformer라는 최신 NLP 모델을 사용해서 '스릴러', '로맨스', '액션' 같은 장르명을 컴퓨터가 이해할 수 있는 384차원의 숫자 벡터로 변환한다. 이 과정을 통해 '스릴러'와 '액션'의 유사도가 0.73으로 계산되는 등, 인간이 직관적으로 느끼는 장르 간 관계를 수치로 정확히 표현할 수 있다.

두 번째는 유사도 계산 기술이다. 코사인 유사도를 핵심으로 하는 이 기술은 고차원 벡터 공간에서 두 벡터 간의 각도를 측정해 유사성을 판단한다. 따라서 장르뿐만 아니라 6가지의 차원들의 특성을 각각 다른 가중치로 결합해 최종 추천 점수를 산출한다.

세 번째는 동적 프로그래밍 알고리즘 활용이다. 추천 콘텐츠를 특정 조건에 의해 필터링하게 되는데, 이때 최대한 많은 콘텐츠를 추천하기 위해서 활용하게 되었다.

### 2.2 데이터 수집

키노라이츠 웹에서 셀레니움 라이브러리를 활용하여 데이터를 수집하였다. 연령대, 성별 별로 다양한 콘텐츠를 수집하였으며, 여기서 랭킹은 내부 인기도와 다양한 국내 미디어 트렌드 데이터를 종합하여 산정된 것이다.

세부 장르 데이터는 나와있지 않아서, 각 콘텐츠 타이틀을 위키백과 URL에 포함시켜 스크래핑 하였다. 해당 스크래핑으로 세부 장르, 출연 배우, 러닝 타임 등을 수집하였다.

### 2.3 추천 시스템 종류

추천 시스템의 전체적인 흐름으로는 사용자가 우선 연령대, 성별, 선호 장르, 주 시청 시간, 월 구독 예산, 좋아하는 콘텐츠 제목을 입력하고, 서버는 두 개의 시스템에 입력을 전달한다.

첫 번째 시스템은 OTT만 추천하는 서비스로, 연령대와 성별 그리고 좋아하는 콘텐츠 제목을 전달한다. 해당 시스템은 좋아하는 콘텐츠 제목에 자연어 처리를 활용하여 비슷한 콘텐츠가 있는 OTT들을 추천한다. 이 시스템이 출력한 OTT는 사용자들이 참고 지표로 사용할 수 있도록 만들었다.  

두 번째 시스템은 콘텐츠와 OTT를 전부 추천하는 서비스이다. 연령대, 성별, 선호 장르, 주 시청 시간, 월 구독 예산을 전달하여 코사인 유사도를 활용하여 콘텐츠를 추천하고, 해당 콘텐츠를 시청할 수 있는 OTT를 추천한다.

### 2.4 콘텐츠 추천 프로세스

1. **SentenceTransformer를 활용하여, 장르 유사도를 파악한다.**
2. **성별/연령대별 콘텐츠 순위를 매치시켜 점수를 부여**
![콘텐츠와 점수 예시.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EC%BD%98%ED%85%90%EC%B8%A0%EC%99%80%20%EC%A0%90%EC%88%98%20%EC%98%88%EC%8B%9C.png?raw=true)
장르만으로도 콘텐츠 추천이 가능하지만, 더욱 정확한 추천을 위해 사용자의 연령대/성별과 콘텐츠의 타겟 연령/성별 매칭도를 추가로 고려하는 방식을 채택하였다. 성별과 연령대, 그리고 랭킹을 활용한 유사도 계산 방식을 구체적인 예시로 설명하자면 다음과 같다.

20대 남성 사용자가 있다고 가정하고, 같은 장르의 세 가지 콘텐츠가 있는데, 각각 다른 연령대를 타겟으로 하고 있습니다.

첫 번째 콘텐츠는 30대 남성에게 3위를 기록한 작품이고, 20대 사용자와는 한 단계 차이가 나므로 연령 페널티 0.8을 적용하고, 랭킹 3위를 반영하여 최종 점수는 5.72점을 받았다.

두 번째 콘텐츠는 20대 남성에게 21위를 기록한 작품이며, 사용자와 타겟 연령이 정확히 일치하므로 연령 유사도는 1.0이 되지만, 낮은 랭킹 때문에 최종 점수는 3.12점으로 계산된다.

세 번째 콘텐츠는 매우 흥미로운 케이스이다. 20대 남성에게는 32위로 상당히 낮은 순위를 기록했지만, 20대 여성에게는 1위를 차지한 작품이다. 성별 불일치에 따른 페널티 0.3을 적용하더라도, 1위라는 압도적인 랭킹 덕분에 최종 점수는 3.60점으로 두 번째 콘텐츠보다 높게 나온다.

결과적으로 이 20대 남성 사용자에게는 콘텐츠1, 콘텐츠3, 콘텐츠2 순으로 추천하게 된다. 이러한 각 조건별 점수 부여는 다음과 같이 다른 종류도 포함하였다.

![통합 점수 결과.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%ED%86%B5%ED%95%A9%20%EC%A0%90%EC%88%98%20%EA%B2%B0%EA%B3%BC.png?raw=true)

콘텐츠 자체 점수와 통합 랭킹 점수는 웹 스크래핑을 통해서 가져온 데이터를 0~1 사이의 값으로 정규화한 점수이다.

3. **러닝 타임 점수 계산**

여기서 러닝타임 점수는 콘텐츠의 러닝타임이 특정 시간보다 길다면 점수를 낮추는 방향으로 측정하였다. 영화의 경우는 평균 2시간으로 긴 러닝타임이 아니기 때문에 1점을 주었고, 시리즈 종류의 콘텐츠들에만 러닝타임 점수에 조건을 두었다.

기준 시간은 10시간으로 설정하였으며, 10시간이 넘어갈 경우 점수를 감소시켰다. 즉, 시리즈가 길 수록 점수를 감소시키는 방향으로 시스템을 설계하였다. 시간 기준을 10시간으로 설계한 이유는 다음과 같다.

![이용 시간 자료.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EC%9D%B4%EC%9A%A9%20%EC%8B%9C%EA%B0%84%20%EC%9E%90%EB%A3%8C.png?raw=true)

국내 OTT 이용자의 시청 빈도 조사 결과, 가장 높은 비율을 차지하는 것은 '주 3-4일'과 '주 7일' 시청으로, 이를 평균화하면 대략 주 5일 시청 패턴이 일반적이다.

또한 OTT 평균 체류시간이 117분이라는 점을 고려하면, 주 5일 × 일 2시간 = 주 10시간이 사용자들이 현실적으로 소화 가능한 적정 시청량이다.

따라서 러닝타임이 10시간을 초과하는 콘텐츠는 실제 완주 가능성이 낮다고 판단하여 시간 효율성 점수가 급격히 감소하도록 설계하였다.

4. **총 6개의 각 점수에 가중치를 부여하여 합산한 후, 상위 8개의 콘텐츠를 추천**

![통합 점수 결과 with 가중치.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%ED%86%B5%ED%95%A9%20%EC%A0%90%EC%88%98%20%EA%B2%B0%EA%B3%BC%20with%20%EA%B0%80%EC%A4%91%EC%B9%98.png?raw=true)

해당 가중치를 머신러닝을 활용하여 동적으로 변동시켜 학습시킬 수 있지만, 현재 추천 시스템은 user-item matrix 데이터도 없고, 사용자 반응 로그 등의 참고 데이터도 없기에 모델이 가중치를 학습하기 힘들 것으로 판단하여 주관적으로 설정하였다.

주관적으로 가중치를 설정했더라도 모두 동일하게 설정하지 않았고, 화면에서 보시다시피 연령대 유사도에는 0.15, 성별 유사도에는 0.1의 가중치를 적용해, 상대적인 중요도에 따라 가중치를 조정하였다.

![연령이 성별보다 중요한 이유.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EC%97%B0%EB%A0%B9%EC%9D%B4%20%EC%84%B1%EB%B3%84%EB%B3%B4%EB%8B%A4%20%EC%A4%91%EC%9A%94%ED%95%9C%20%EC%9D%B4%EC%9C%A0.png?raw=true)

이렇게 설정한 이유는 "KNN-based Recommender System" 논문 분석에서 확인할 수 있다. 이 연구에 따르면 성별은 단 한 번만 유의미한 변수로 나타난 반면, 연령대는 총 8회 이상 중요한 변수로 등장했다. 이러한 통계적 결과를 바탕으로, 사용자와 콘텐츠 간의 적합도를 보다 정밀하게 반영하기 위해 연령대 정보를 성별보다 더 중요한 판단 기준으로 활용한 것이다.

위와 같은 방법으로 가장 높은 점수를 받은 8개의 콘텐츠가 최종 추천이 되지는 않는다. 사용자가 입력한 [1주 동안 OTT 사용 시간] 내에서 시청할 수 있는 콘텐츠만 추천해야 하기에 최대 8개이고, 1개가 추천될 수도 있다.

시스템은 사용자가 한 달에 하나의 OTT만 구독한다고 가정한다. 따라서 사용자가 한 달 동안 하나의 OTT를 사용할 수 있는 시간은 [1주 동안 OTT 사용 시간] X 4 가 된다.(한 달을 4주로 계산)

5. **동적 프로그래밍 기반 콘텐츠 필터링**

![콘텐츠 추천 동적 알고리즘 예시1.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EC%BD%98%ED%85%90%EC%B8%A0%20%EC%B6%94%EC%B2%9C%20%EB%8F%99%EC%A0%81%20%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%20%EC%98%88%EC%8B%9C1.png?raw=true)

예를들어, 사용자가 [1주 동안 OTT 사용 시간]을 5라고 입력했을 때, 한 달 시청 시간은 20시간이 된다. 한 달간 넷플릭스 사용 시간은 20시간, 다음 한 달동안 쿠팡 플레이 사용 시간은 20시간으로 정의할 수 있다.(사실 순서는 중요하지 않고, 예시라서 설정해둔 것)

추천 콘텐츠 8개 중에서 2개는 Netflix에서만 시청 수 있고, 3개는 쿠팡 플레이에서만 시청할 수 있으며, 나머지 3개는 두 곳 모두에서 시청 가능하다고 가정한다. 또한, 한 곳에서만 시청할 수 있는 콘텐츠들에 의해서 Netflix에서 15시간을 시청하고, 쿠팡 플레이에서 17시간을 시청할 수 있다고 가정하였다.

나머지 두 곳에서 시청할 수 있는 3개의 콘텐츠(1, 2, 5시간 짜리)들을 Netflix의 여유 시간(5시간), 쿠팡 플레이의 여유 시간(3시간)에 배분하여 최대한 많은 콘텐츠를 추천하는 것이 목표이다.

그리디의 경우는 로직에 따라 다르겠지만, 가장 적은 시간을 가장 여유시간이 많은 플랫폼에 분배하는 순서로 진행하게 될 것이다. 즉, 아래 이미지와 같은 결과대로 하나의 콘텐츠를 추천할 수 없게 된다.

![콘텐츠 추천 그리디 알고리즘 예시.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EC%BD%98%ED%85%90%EC%B8%A0%20%EC%B6%94%EC%B2%9C%20%EA%B7%B8%EB%A6%AC%EB%94%94%20%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%20%EC%98%88%EC%8B%9C.png?raw=true)

하지만 동적 프로그래밍을 활용하면 모든 경우의 수를 구하여 최대한 많은 추천 콘텐츠 모두를 반환할 수 있게 된다. 따라서 예를 든 케이스에서는 아래와 같이 8개 모두를 추천할 수 있게 된다.

![콘텐츠 추천 동적 알고리즘 예시2.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EC%BD%98%ED%85%90%EC%B8%A0%20%EC%B6%94%EC%B2%9C%20%EB%8F%99%EC%A0%81%20%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%20%EC%98%88%EC%8B%9C2.png?raw=true)

하지만 모든 경우를 계산하더라도, 사용자의 ott 사용 시간을 넘어가게 될 경우는 결국 추천 목록에서 제외된다.

### 2.5 사용 예제와 OTT 추천

![사용자 입력 예시 ui.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%9E%85%EB%A0%A5%20%EC%98%88%EC%8B%9C%20ui.png?raw=true)

위와 같이 사용자로부터 연령대, 성별, 장르, 예산, 주 ott 사용 시간 등을 입력을 받으면, 아래와 같이 추천 콘텐츠와 이를 시청할 수 있는 OTT를 추천하게 된다.

![결과 예시 ui.png](https://github.com/1Dohyeon/Projects/blob/main/imgs/%EA%B2%B0%EA%B3%BC%20%EC%98%88%EC%8B%9C%20ui.png?raw=true)

"동적 프로그래밍 기반 콘텐츠 필터링" 에서 최종 반환된 추천 콘텐츠를 시청할 수 있는 모든 OTT를 찾고, 그 중에서 가장 저렴한 요금제를 보여준다.

하지만 사용자에게 최종 반환을 하기 전 OTT 필터링 알고리즘도 거치게 된다. 특정 OTT의 추천 콘텐츠 집합이 다른 OTT 집합에 포함될 경우 추천하지 않는 알고리즘이다.

이미지 예시에서는 Netflix의 콘텐츠를 Wavve로 커버할 수 있기에, Netflix는 제외하여 최소로 구독할 수 있는 경우를 추천하게 된다.

## 3. 활용 한계점 및 확장성

현재 시스템은 사용자의 입력 정보를 바탕으로 콘텐츠를 추천하지만, 개인별 시청 이력 데이터는 반영되지 않는다. 즉, 사용자가 실제로 어떤 콘텐츠를 선호하고 어떤 패턴으로 시청하는지에 대한 구체적인 행태 데이터가 부족한 상태이다. 

이로 인해 추천의 정확도는 일반적인 선호 경향에 기반할 수밖에 없고, 개인화 수준에 한계가 존재한다. 향후 사용자의 시청 로그나 평가 이력을 축적하고 반영할 수 있다면, 가중치를 모델이 직접 학습하도록 할 수 있고, 추천의 정밀도와 개인화 수준은 훨씬 높아질 것으로 기대할 수 있다.

또한, 추천 결과를 LLM과 연계해서 “지금 이달엔 넷플릭스, 다음 달엔 티빙”처럼 자연어로 설명해주는 컨설팅 형태로 확장시킬 수 있다고 생각하고 있다. 사용자 입장에서는 점수나 리스트가 아니라, 상황에 맞춘 구체적인 구독 전략을 받아볼 수 있어서 훨씬 직관적이다.

더 나아가 생활 패턴까지 반영해서 추천을 조정하거나, 구독 비용 대비 만족도를 분석해서 자동 제안하는 기능으로도 확장 가능하다고 생각한다.

## 4. 성과 및 배운 점

- NLP 기반 콘텐츠 임베딩 및 벡터 연산을 활용한 추천 시스템 설계
- 다중 조건 최적화(다이나믹 알고리즘)를 실제 서비스 로직에 적용
- ML 모델 서빙과 프론트 통합을 통한 엔드 투 엔드 시스템 개발 경험